<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Convert cURL commands to code in Python, JavaScript, Go, PHP, Ruby, Java, Rust, and more. Free online tool for developers to transform API requests into production-ready code.">
    <meta name="keywords" content="curl to code, curl converter, api code generator, curl to python, curl to javascript, curl to java, curl to rust, curl parser, http request converter">
    <meta name="author" content="Muin">
    <title>cURL to Code - Convert cURL Commands to Code in Any Language</title>
    <link rel="canonical" href="https://curl2code.com">
    
    <!-- Open Graph -->
    <meta property="og:title" content="cURL to Code - Convert cURL Commands Instantly">
    <meta property="og:description" content="Free tool to convert cURL commands to Python, JavaScript, Go, PHP, Ruby, Java, Rust code. Fast, simple, and developer-friendly.">
    <meta property="og:type" content="website">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="cURL to Code Converter">
    <meta name="twitter:description" content="Convert cURL commands to code in any language instantly.">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-primary: #0d1117;
            --bg-secondary: #161b22;
            --bg-tertiary: #1f2937;
            --border-color: #30363d;
            --text-primary: #e6edf3;
            --text-secondary: #8b949e;
            --accent: #58a6ff;
            --accent-hover: #79c0ff;
            --success: #3fb950;
            --code-bg: #161b22;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 40px 20px;
            border-bottom: 1px solid var(--border-color);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--accent) 0%, var(--success) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-secondary);
            font-size: 1.1rem;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .panel {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
        }

        .panel-header {
            padding: 15px 20px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-title {
            font-size: 1rem;
            font-weight: 600;
        }

        .panel-content {
            padding: 0;
        }

        textarea {
            width: 100%;
            min-height: 300px;
            background: var(--code-bg);
            color: var(--text-primary);
            border: none;
            padding: 20px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            resize: vertical;
            outline: none;
        }

        .language-selector {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }

        .lang-btn {
            padding: 6px 12px;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s;
        }

        .lang-btn:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .lang-btn.active {
            background: var(--accent);
            color: white;
            border-color: var(--accent);
        }

        .output-area {
            position: relative;
        }

        .output-code {
            min-height: 300px;
            background: var(--code-bg);
            padding: 20px;
            font-family: 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.5;
            overflow-x: auto;
            white-space: pre;
        }

        .copy-btn {
            position: absolute;
            top: 15px;
            right: 180px;
            padding: 8px 16px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .copy-btn:hover {
            background: var(--accent-hover);
        }

        .copy-btn.copied {
            background: var(--success);
        }

        .download-btn {
            position: absolute;
            top: 15px;
            right: 90px;
            padding: 8px 16px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .download-btn:hover {
            background: var(--accent-hover);
        }

        .download-btn.downloaded {
            background: var(--success);
        }

        .share-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 8px 16px;
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.2s;
        }

        .share-btn:hover {
            background: var(--bg-secondary);
            border-color: var(--accent);
        }

        .share-btn.shared {
            background: var(--success);
            border-color: var(--success);
        }

        .examples {
            margin-top: 30px;
            padding: 20px;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 8px;
        }

        .examples h3 {
            margin-bottom: 15px;
            color: var(--text-primary);
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 10px;
        }

        .example-btn {
            padding: 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            color: var(--text-primary);
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            font-size: 14px;
        }

        .example-btn:hover {
            border-color: var(--accent);
            background: var(--bg-primary);
        }

        .example-btn strong {
            display: block;
            color: var(--accent);
            margin-bottom: 4px;
        }

        .error {
            color: #f85149;
            padding: 10px 20px;
            background: rgba(248, 81, 73, 0.1);
            border-left: 3px solid #f85149;
            margin: 10px 20px;
            border-radius: 4px;
            font-size: 14px;
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            margin-top: 60px;
            border-top: 1px solid var(--border-color);
            color: var(--text-secondary);
            font-size: 14px;
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        @media (max-width: 968px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2rem;
            }

            .example-grid {
                grid-template-columns: 1fr;
            }
        }

        /* Syntax highlighting */
        .keyword { color: #ff7b72; }
        .string { color: #a5d6ff; }
        .comment { color: #8b949e; }
        .function { color: #d2a8ff; }
        .number { color: #79c0ff; }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>cURL to Code</h1>
            <p class="subtitle">Convert cURL commands to code in Python, JavaScript, Go, PHP, Ruby, Java, Rust, and more</p>
        </div>
    </header>

    <div class="container">
        <div class="main-content">
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">cURL Command</span>
                </div>
                <div class="panel-content">
                    <textarea id="curlInput" placeholder="Paste your cURL command here...
Example:
curl -X POST https://api.example.com/users \
  -H 'Content-Type: application/json' \
  -d '{&quot;name&quot;:&quot;John&quot;}'"></textarea>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">Generated Code</span>
                    <div class="language-selector">
                        <button class="lang-btn active" data-lang="python">Python</button>
                        <button class="lang-btn" data-lang="javascript">JavaScript</button>
                        <button class="lang-btn" data-lang="nodejs">Node.js</button>
                        <button class="lang-btn" data-lang="go">Go</button>
                        <button class="lang-btn" data-lang="php">PHP</button>
                        <button class="lang-btn" data-lang="ruby">Ruby</button>
                        <button class="lang-btn" data-lang="java">Java</button>
                        <button class="lang-btn" data-lang="rust">Rust</button>
                    </div>
                </div>
                <div class="panel-content">
                    <div class="output-area">
                        <button class="copy-btn" id="copyBtn" title="Copy code (Ctrl+Shift+C)">Copy</button>
                        <button class="download-btn" id="downloadBtn" title="Download file (Ctrl+S)">Download</button>
                        <button class="share-btn" id="shareBtn">Share</button>
                        <pre class="output-code" id="output">// Your converted code will appear here...</pre>
                    </div>
                </div>
            </div>
        </div>

        <div class="examples">
            <h3>üìã Quick Examples</h3>
            <div class="example-grid">
                <button class="example-btn" data-example="get">
                    <strong>GET Request</strong>
                    Simple GET request with headers
                </button>
                <button class="example-btn" data-example="post">
                    <strong>POST JSON</strong>
                    POST with JSON body
                </button>
                <button class="example-btn" data-example="auth">
                    <strong>Basic Auth</strong>
                    Request with authentication
                </button>
                <button class="example-btn" data-example="headers">
                    <strong>Custom Headers</strong>
                    Multiple headers
                </button>
                <button class="example-btn" data-example="form">
                    <strong>Form Data</strong>
                    POST with form data
                </button>
                <button class="example-btn" data-example="query">
                    <strong>Query Params</strong>
                    GET with query parameters
                </button>
            </div>
        </div>
    </div>

    <footer>
        <p>Built with ‚ù§Ô∏è for developers | <a href="https://github.com/yourusername/curl-to-code" target="_blank">GitHub</a> | Free & Open Source</p>
        <p style="font-size: 12px; color: var(--text-secondary); margin-top: 10px;">
            üí° Keyboard shortcuts: <kbd style="padding: 2px 6px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 3px;">Ctrl+Enter</kbd> to convert | 
            <kbd style="padding: 2px 6px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 3px;">Ctrl+S</kbd> to download | 
            <kbd style="padding: 2px 6px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 3px;">Ctrl+Shift+C</kbd> to copy
        </p>
    </footer>

    <script>
        const examples = {
            get: `curl -X GET https://api.example.com/users \\
  -H 'Accept: application/json' \\
  -H 'Authorization: Bearer token123'`,
            
            post: `curl -X POST https://api.example.com/users \\
  -H 'Content-Type: application/json' \\
  -d '{"name":"John Doe","email":"john@example.com"}'`,
            
            auth: `curl -X GET https://api.example.com/protected \\
  -u username:password`,
            
            headers: `curl https://api.example.com/data \\
  -H 'User-Agent: MyApp/1.0' \\
  -H 'Accept: application/json' \\
  -H 'X-API-Key: secret123'`,
            
            form: `curl -X POST https://api.example.com/upload \\
  -F 'file=@document.pdf' \\
  -F 'description=My file'`,
            
            query: `curl 'https://api.example.com/search?q=javascript&limit=10&page=1'`
        };

        class CurlParser {
            parse(curlCommand) {
                const result = {
                    url: '',
                    method: 'GET',
                    headers: {},
                    data: null,
                    auth: null,
                    cookies: {},
                    query: {}
                };

                // Remove 'curl' from the beginning and normalize whitespace
                let cmd = curlCommand.trim()
                    .replace(/^curl\s+/i, '')
                    .replace(/\\\n/g, ' ')
                    .replace(/\s+/g, ' ');

                // Extract URL (first non-flag argument or after explicit URL flags)
                // Match URLs more specifically - must start with http/https or be quoted
                const urlMatch = cmd.match(/(?:--url\s+)?(['"]?)(https?:\/\/[^\s'"]+)\1/) || 
                                cmd.match(/\s(['"])(https?:\/\/[^'"]+)\1/) ||
                                cmd.match(/\s(https?:\/\/\S+)/);
                if (urlMatch) {
                    result.url = urlMatch[2] || urlMatch[1];
                    // Parse query parameters from URL
                    try {
                        const urlObj = new URL(result.url);
                        urlObj.searchParams.forEach((value, key) => {
                            result.query[key] = value;
                        });
                    } catch (e) {
                        // Invalid URL, ignore query params
                    }
                }

                // Extract method
                const methodMatch = cmd.match(/-X\s+([A-Z]+)/);
                if (methodMatch) {
                    result.method = methodMatch[1];
                } else if (cmd.includes('-d') || cmd.includes('--data')) {
                    result.method = 'POST';
                }

                // Extract headers
                const headerRegex = /-H\s+(['"])([^'"]+)\1/g;
                let headerMatch;
                while ((headerMatch = headerRegex.exec(cmd)) !== null) {
                    const [key, value] = headerMatch[2].split(':').map(s => s.trim());
                    if (key && value) {
                        result.headers[key] = value;
                    }
                }

                // Extract data/body
                const dataMatch = cmd.match(/(?:-d|--data|--data-raw)\s+(['"])(.+?)\1/);
                if (dataMatch) {
                    result.data = dataMatch[2];
                }

                // Extract basic auth
                const authMatch = cmd.match(/(?:-u|--user)\s+(['"]?)([^'":\s]+):([^'"\s]+)\1/);
                if (authMatch) {
                    result.auth = {
                        username: authMatch[2],
                        password: authMatch[3]
                    };
                }

                // Extract cookies
                const cookieMatch = cmd.match(/-b\s+(['"])([^'"]+)\1/);
                if (cookieMatch) {
                    cookieMatch[2].split(';').forEach(cookie => {
                        const [key, value] = cookie.split('=').map(s => s.trim());
                        if (key && value) {
                            result.cookies[key] = value;
                        }
                    });
                }

                // Extract form data
                const formRegex = /-F\s+(['"])([^'"=]+)=([^'"]+)\1/g;
                let formMatch;
                const formData = {};
                while ((formMatch = formRegex.exec(cmd)) !== null) {
                    formData[formMatch[2]] = formMatch[3];
                }
                if (Object.keys(formData).length > 0) {
                    result.formData = formData;
                }

                return result;
            }
        }

        class CodeGenerator {
            generatePython(parsed) {
                let code = 'import requests\n\n';
                
                const parts = [];
                parts.push(`url = '${parsed.url}'`);
                
                if (Object.keys(parsed.headers).length > 0) {
                    parts.push(`headers = ${JSON.stringify(parsed.headers, null, 4)}`);
                }
                
                if (parsed.auth) {
                    parts.push(`auth = ('${parsed.auth.username}', '${parsed.auth.password}')`);
                }
                
                if (parsed.data) {
                    try {
                        const jsonData = JSON.parse(parsed.data);
                        parts.push(`json_data = ${JSON.stringify(jsonData, null, 4)}`);
                    } catch {
                        parts.push(`data = '${parsed.data}'`);
                    }
                }
                
                code += parts.join('\n\n') + '\n\n';
                
                const requestParts = [`url`];
                if (Object.keys(parsed.headers).length > 0) requestParts.push('headers=headers');
                if (parsed.auth) requestParts.push('auth=auth');
                if (parsed.data) {
                    requestParts.push(parsed.data.startsWith('{') ? 'json=json_data' : 'data=data');
                }
                
                code += `response = requests.${parsed.method.toLowerCase()}(\n    ${requestParts.join(',\n    ')}\n)\n\n`;
                code += `print(response.status_code)\nprint(response.text)`;
                
                return code;
            }

            generateJavaScript(parsed) {
                let code = `const url = '${parsed.url}';\n\n`;
                
                const options = {
                    method: parsed.method
                };
                
                if (Object.keys(parsed.headers).length > 0) {
                    options.headers = parsed.headers;
                }
                
                if (parsed.data) {
                    options.body = parsed.data.startsWith('{') ? parsed.data : `'${parsed.data}'`;
                }
                
                code += `const options = ${JSON.stringify(options, null, 2)};\n\n`;
                code += `fetch(url, options)\n`;
                code += `  .then(response => response.json())\n`;
                code += `  .then(data => console.log(data))\n`;
                code += `  .catch(error => console.error('Error:', error));`;
                
                return code;
            }

            generateNodeJS(parsed) {
                let code = `const axios = require('axios');\n\n`;
                
                const config = {
                    method: parsed.method.toLowerCase(),
                    url: parsed.url
                };
                
                if (Object.keys(parsed.headers).length > 0) {
                    config.headers = parsed.headers;
                }
                
                if (parsed.data) {
                    try {
                        config.data = JSON.parse(parsed.data);
                    } catch {
                        config.data = parsed.data;
                    }
                }
                
                if (parsed.auth) {
                    config.auth = parsed.auth;
                }
                
                code += `const config = ${JSON.stringify(config, null, 2)};\n\n`;
                code += `axios(config)\n`;
                code += `  .then(response => {\n`;
                code += `    console.log(JSON.stringify(response.data));\n`;
                code += `  })\n`;
                code += `  .catch(error => {\n`;
                code += `    console.log(error);\n`;
                code += `  });`;
                
                return code;
            }

            generateGo(parsed) {
                let code = 'package main\n\nimport (\n    "fmt"\n    "io"\n';
                code += '    "net/http"\n';
                if (parsed.data) code += '    "strings"\n';
                code += ')\n\nfunc main() {\n';
                
                code += `    url := "${parsed.url}"\n`;
                
                if (parsed.data) {
                    code += `    payload := strings.NewReader(\`${parsed.data}\`)\n`;
                    code += `    req, _ := http.NewRequest("${parsed.method}", url, payload)\n`;
                } else {
                    code += `    req, _ := http.NewRequest("${parsed.method}", url, nil)\n`;
                }
                
                if (Object.keys(parsed.headers).length > 0) {
                    code += '\n';
                    for (const [key, value] of Object.entries(parsed.headers)) {
                        code += `    req.Header.Add("${key}", "${value}")\n`;
                    }
                }
                
                if (parsed.auth) {
                    code += `\n    req.SetBasicAuth("${parsed.auth.username}", "${parsed.auth.password}")\n`;
                }
                
                code += '\n    res, _ := http.DefaultClient.Do(req)\n';
                code += '    defer res.Body.Close()\n';
                code += '    body, _ := io.ReadAll(res.Body)\n\n';
                code += '    fmt.Println(res)\n';
                code += '    fmt.Println(string(body))\n';
                code += '}';
                
                return code;
            }

            generatePHP(parsed) {
                let code = '<?php\n\n';
                code += '$ch = curl_init();\n\n';
                code += `curl_setopt($ch, CURLOPT_URL, '${parsed.url}');\n`;
                code += 'curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n';
                
                if (parsed.method !== 'GET') {
                    code += `curl_setopt($ch, CURLOPT_CUSTOMREQUEST, '${parsed.method}');\n`;
                }
                
                if (parsed.data) {
                    code += `\ncurl_setopt($ch, CURLOPT_POSTFIELDS, '${parsed.data}');\n`;
                }
                
                if (Object.keys(parsed.headers).length > 0) {
                    code += '\n$headers = array(\n';
                    for (const [key, value] of Object.entries(parsed.headers)) {
                        code += `    '${key}: ${value}',\n`;
                    }
                    code += ');\n';
                    code += 'curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n';
                }
                
                if (parsed.auth) {
                    code += `\ncurl_setopt($ch, CURLOPT_USERPWD, '${parsed.auth.username}:${parsed.auth.password}');\n`;
                }
                
                code += '\n$result = curl_exec($ch);\n';
                code += 'if (curl_errno($ch)) {\n';
                code += '    echo \'Error:\' . curl_error($ch);\n';
                code += '}\n';
                code += 'curl_close($ch);\n';
                code += 'echo $result;';
                
                return code;
            }

            generateRuby(parsed) {
                let code = "require 'net/http'\n";
                code += "require 'json'\n";
                code += "require 'uri'\n\n";
                
                code += `uri = URI.parse('${parsed.url}')\n`;
                code += `request = Net::HTTP::${parsed.method.charAt(0) + parsed.method.slice(1).toLowerCase()}.new(uri)\n`;
                
                if (Object.keys(parsed.headers).length > 0) {
                    code += '\n';
                    for (const [key, value] of Object.entries(parsed.headers)) {
                        code += `request["${key}"] = "${value}"\n`;
                    }
                }
                
                if (parsed.auth) {
                    code += `\nrequest.basic_auth('${parsed.auth.username}', '${parsed.auth.password}')\n`;
                }
                
                if (parsed.data) {
                    code += `\nrequest.body = '${parsed.data}'\n`;
                }
                
                code += '\nreq_options = {\n';
                code += '  use_ssl: uri.scheme == "https"\n';
                code += '}\n\n';
                code += 'response = Net::HTTP.start(uri.hostname, uri.port, req_options) do |http|\n';
                code += '  http.request(request)\n';
                code += 'end\n\n';
                code += 'puts response.code\n';
                code += 'puts response.body';
                
                return code;
            }

            generateJava(parsed) {
                let code = 'import java.net.http.HttpClient;\n';
                code += 'import java.net.http.HttpRequest;\n';
                code += 'import java.net.http.HttpResponse;\n';
                code += 'import java.net.URI;\n\n';
                code += 'public class Main {\n';
                code += '    public static void main(String[] args) throws Exception {\n';
                code += '        HttpClient client = HttpClient.newHttpClient();\n\n';
                
                code += '        HttpRequest.Builder requestBuilder = HttpRequest.newBuilder()\n';
                code += `            .uri(URI.create("${parsed.url}"))\n`;
                code += `            .method("${parsed.method}", `;
                
                if (parsed.data) {
                    code += `HttpRequest.BodyPublishers.ofString("${parsed.data.replace(/"/g, '\\"')}"))\n`;
                } else {
                    code += 'HttpRequest.BodyPublishers.noBody())\n';
                }
                
                if (Object.keys(parsed.headers).length > 0) {
                    for (const [key, value] of Object.entries(parsed.headers)) {
                        code += `            .header("${key}", "${value}")\n`;
                    }
                }
                
                code += ';\n\n';
                
                if (parsed.auth) {
                    code += '        // Note: Basic auth requires manual encoding\n';
                    code += '        String auth = java.util.Base64.getEncoder()\n';
                    code += `            .encodeToString("${parsed.auth.username}:${parsed.auth.password}".getBytes());\n`;
                    code += '        requestBuilder.header("Authorization", "Basic " + auth);\n\n';
                }
                
                code += '        HttpRequest request = requestBuilder.build();\n\n';
                code += '        HttpResponse<String> response = client.send(request,\n';
                code += '            HttpResponse.BodyHandlers.ofString());\n\n';
                code += '        System.out.println(response.statusCode());\n';
                code += '        System.out.println(response.body());\n';
                code += '    }\n';
                code += '}';
                
                return code;
            }

            generateRust(parsed) {
                let code = '// Add to Cargo.toml: reqwest = { version = "0.11", features = ["json"] }\n';
                code += '// tokio = { version = "1", features = ["full"] }\n\n';
                code += 'use reqwest;\n';
                code += 'use std::collections::HashMap;\n\n';
                code += '#[tokio::main]\n';
                code += 'async fn main() -> Result<(), Box<dyn std::error::Error>> {\n';
                code += '    let client = reqwest::Client::new();\n\n';
                
                code += `    let mut request = client.${parsed.method.toLowerCase()}("${parsed.url}")\n`;
                
                if (Object.keys(parsed.headers).length > 0) {
                    for (const [key, value] of Object.entries(parsed.headers)) {
                        code += `        .header("${key}", "${value}")\n`;
                    }
                }
                
                if (parsed.auth) {
                    code += `        .basic_auth("${parsed.auth.username}", Some("${parsed.auth.password}"))\n`;
                }
                
                if (parsed.data) {
                    try {
                        JSON.parse(parsed.data);
                        code += `        .json(&serde_json::json!(${parsed.data}))\n`;
                    } catch {
                        code += `        .body("${parsed.data.replace(/"/g, '\\"')}")\n`;
                    }
                }
                
                code += ';\n\n';
                code += '    let response = request.send().await?;\n';
                code += '    let status = response.status();\n';
                code += '    let body = response.text().await?;\n\n';
                code += '    println!("Status: {}", status);\n';
                code += '    println!("Body: {}", body);\n\n';
                code += '    Ok(())\n';
                code += '}';
                
                return code;
            }

            generate(parsed, language) {
                const generators = {
                    python: () => this.generatePython(parsed),
                    javascript: () => this.generateJavaScript(parsed),
                    nodejs: () => this.generateNodeJS(parsed),
                    go: () => this.generateGo(parsed),
                    php: () => this.generatePHP(parsed),
                    ruby: () => this.generateRuby(parsed),
                    java: () => this.generateJava(parsed),
                    rust: () => this.generateRust(parsed)
                };

                return generators[language]?.() || '// Language not supported yet';
            }
        }

        // Initialize
        const parser = new CurlParser();
        const generator = new CodeGenerator();
        let currentLanguage = 'python';
        let currentCode = '';

        const curlInput = document.getElementById('curlInput');
        const output = document.getElementById('output');
        const copyBtn = document.getElementById('copyBtn');
        const langBtns = document.querySelectorAll('.lang-btn');
        const exampleBtns = document.querySelectorAll('.example-btn');

        function convertCurl() {
            const curlCommand = curlInput.value.trim();
            
            if (!curlCommand) {
                output.textContent = '// Your converted code will appear here...';
                return;
            }

            try {
                const parsed = parser.parse(curlCommand);
                
                if (!parsed.url) {
                    throw new Error('Could not parse URL from cURL command');
                }

                currentCode = generator.generate(parsed, currentLanguage);
                output.textContent = currentCode;
            } catch (error) {
                output.innerHTML = `<span style="color: #f85149;">Error: ${error.message}</span>`;
            }
        }

        // Event listeners with localStorage
        curlInput.addEventListener('input', () => {
            convertCurl();
            localStorage.setItem('curl-to-code-input', curlInput.value);
            localStorage.setItem('curl-to-code-lang', currentLanguage);
        });

        langBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                langBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentLanguage = btn.dataset.lang;
                localStorage.setItem('curl-to-code-lang', currentLanguage);
                convertCurl();
            });
        });

        copyBtn.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(currentCode);
                copyBtn.textContent = 'Copied!';
                copyBtn.classList.add('copied');
                setTimeout(() => {
                    copyBtn.textContent = 'Copy';
                    copyBtn.classList.remove('copied');
                }, 2000);
            } catch (error) {
                console.error('Failed to copy:', error);
            }
        });

        const downloadBtn = document.getElementById('downloadBtn');
        downloadBtn.addEventListener('click', () => {
            if (!currentCode || currentCode === '// Your converted code will appear here...') {
                alert('Please convert a cURL command first!');
                return;
            }
            
            // Determine file extension based on language
            const extensions = {
                'python': '.py',
                'javascript': '.js',
                'go': '.go',
                'php': '.php',
                'ruby': '.rb',
                'rust': '.rs'
            };
            
            const extension = extensions[currentLanguage] || '.txt';
            const filename = 'request' + extension;
            
            // Create blob and download
            const blob = new Blob([currentCode], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            // Show feedback
            downloadBtn.textContent = 'Downloaded!';
            downloadBtn.classList.add('downloaded');
            setTimeout(() => {
                downloadBtn.textContent = 'Download';
                downloadBtn.classList.remove('downloaded');
            }, 2000);
        });

        const shareBtn = document.getElementById('shareBtn');
        shareBtn.addEventListener('click', async () => {
            const curl = curlInput.value.trim();
            if (!curl) {
                alert('Please enter a cURL command first!');
                return;
            }
            try {
                const url = new URL(window.location.href.split('?')[0]);
                url.searchParams.set('curl', encodeURIComponent(curl));
                url.searchParams.set('lang', currentLanguage);
                await navigator.clipboard.writeText(url.toString());
                shareBtn.textContent = 'Link Copied!';
                shareBtn.classList.add('shared');
                setTimeout(() => {
                    shareBtn.textContent = 'Share';
                    shareBtn.classList.remove('shared');
                }, 2000);
            } catch (error) {
                console.error('Failed to share:', error);
            }
        });

        exampleBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const example = btn.dataset.example;
                curlInput.value = examples[example];
                convertCurl();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });

        // URL sharing support
        const urlParams = new URLSearchParams(window.location.search);
        if (urlParams.has('curl')) {
            try {
                curlInput.value = decodeURIComponent(urlParams.get('curl'));
            } catch (e) {
                console.error('Failed to decode URL parameter');
            }
        } else {
            // Load from localStorage
            const savedInput = localStorage.getItem('curl-to-code-input');
            if (savedInput) {
                curlInput.value = savedInput;
            } else {
                // Load default example only if no saved data
                curlInput.value = examples.post;
            }
        }

        if (urlParams.has('lang')) {
            const lang = urlParams.get('lang');
            const validLangs = ['python', 'javascript', 'nodejs', 'go', 'php', 'ruby'];
            if (validLangs.includes(lang)) {
                currentLanguage = lang;
                langBtns.forEach(b => b.classList.remove('active'));
                document.querySelector(`[data-lang="${lang}"]`)?.classList.add('active');
            }
        } else {
            // Load language preference from localStorage
            const savedLang = localStorage.getItem('curl-to-code-lang');
            if (savedLang) {
                currentLanguage = savedLang;
                langBtns.forEach(b => b.classList.remove('active'));
                document.querySelector(`[data-lang="${savedLang}"]`)?.classList.add('active');
            }
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Ctrl/Cmd+Enter to convert
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                e.preventDefault();
                convertCurl();
                // Visual feedback
                curlInput.style.borderColor = '#3fb950';
                setTimeout(() => {
                    curlInput.style.borderColor = '';
                }, 300);
            }
            
            // Ctrl/Cmd+S to download
            if ((e.ctrlKey || e.metaKey) && e.key === 's') {
                e.preventDefault();
                document.getElementById('downloadBtn').click();
            }
            
            // Ctrl/Cmd+Shift+C to copy
            if ((e.ctrlKey || e.metaKey) && e.shiftKey && e.key === 'C') {
                e.preventDefault();
                document.getElementById('copyBtn').click();
            }
        });

        convertCurl();
    </script>
</body>
</html>
